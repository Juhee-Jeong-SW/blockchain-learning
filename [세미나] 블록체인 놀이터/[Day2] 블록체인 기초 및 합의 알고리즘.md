# [Day2] : 블록체인 기초 및 합의 알고리즘

by. professor Jongseo park ( 한국항공대학교 )

## [1. 4차 산업혁명]

- No coding, Low coding 시대의 도래

  MS 와 Amazon이 밀고 있는 방향. 코딩이 없어도, 비즈니스 내에서 AI와 블록체인이 어떻게 활용되면 좋을지를 생각한다.

- CPS (Cyber Physical System)

  Ex) 자동차 내비게이션 : 빠른 길을 찾기 위해, GPS "값"을 알아야함.

  ++) 페이스북의 얼굴 인식 정확도 : 약 98% (왜냐, 전세계의 얼굴 데이터를 모아서 가능 즉 페이스북은 이런 데이터를 활용해 비즈니스 도구로 사용하는 중.)

- 알파고 리 vs 알파고 제로

  — 알파고리

  48개의 TPU 가 사용된 분산 버전, 2016년 3월 이세돌 9단과 대국에서 승리, 수천만장의 기보 데이터 필요

  — 알파고 제로

  4개의 TPU 사용된 단일버전 , 알파고 최종 버전

  인간의 기보에 의존하는 지도학습없이 바둑 규칙만으로 스스로 학습하며 기력 향상시킴. ( 빅데이터 학습 필요 X )

  의의 : 빅데이터 확보가 어려워 인공지능을 활용하기 어려웠던 분야에 해결책 제시

  딥마인드, 알파고 폴드 : 단백질 구조 예측(3차원 구조 예측 ← 50년간 풀지 못했던 숙제를 해결함.)

  인공지능을 위해서는 다량의 데이터가 필요한데 이것은 어디에서 얻을 수 있는가? → GAN 과 블록체인을 이용하면 가능하다.

  AI 기술을 활용하기 위해서는 신뢰성이 필요하다. 이러한 신뢰를 "블록체인"이 제공할 것이다.

- IT 분야 4차 산업 혁명

  IoT : 엄청난 데이터 수집

  Big Data : 데이터 저장

  Blockchain : 데이터 공유

  Deep Learning : 데이터 처리 및 가치 창출

## [2. 블록체인 개요]

### 분산 시스템과 탈중앙 시스템

- 현재 모든 의사결정이 중앙화되어 있다. → 문제 : 중앙집중된 곳이 잘못되면 모든 것이 잘못됨.

- 네트워크 발전 이후, 점점 분산된 처리로 발전되어감. 여전히 한 사람이 결정하는 구조임.

- 탈중앙화 시스템의 시작

  지배구조/가버넌스가 민주적으로 여러 사람이 합의 하에 이루어지는 것을 의미 → 의사 결정을 다수 사람 중 다수결로 뽑혀서 결정한다.

  by. 사토시 나카모토 (블록체인 개념의 비트코인 개발, 세계 최초 암호화폐 개발)

> "효율성의 시대 → 신뢰성의 시대"  : 포스트 코로나, 많은 부분이 신뢰성이 중요한 방향으로 흘러갈 것이다.

- 탈중앙화가 어려운 이유 : 지금까지 경험해본 적이 없기 때문에

### 최초의 블록체인 기반 시스템 비트코인

- 2019년 1월 3일 , 제네시스 블록의 탄생 ( 비트 코인 최초 블록 )
- 목적 : 은행을 위한 두 번째 긴급 구제 방안 발표 임박, 중앙화된 자본주의 시장의 폐해를 비트코인으로 해결하자.
- P2P 통신 기술(Torrent), 합의 알고리즘(PoW: 작업증명), 공인인증서 기술(비대칭키 암호, 해쉬 함수) 등을 혼합 → 블록체인 기술 만듦

### 비트코인이란?

- 최초로 블록체인 기술을 활용해 성공적으로 만들어진 암호화폐
- 분산화된 P2P 기반의 디지털 가상화폐 (암호화폐) : P2P 네트워크에서 움직임
- 국경 구분 없이 빠른 거래 가능
- 채굴되는 총량 2100만 BTC로 제한되어 있음. (달러를 찍어내는 속도보다 약 3배 더 빠르다.)
- 10분마다 거래내역이 갱신되며 해킹 어려움 ( 해킹 당한 적 한번도 X )

### Client / Server VS P2P Network

— Client / Server

- Server : 모든 원장, Transaction "전부" 처리함. (ex : 은행)
- Client : 조각 정보만 지님. (ex : 고객)
- 중앙에 있는 곳에만 데이터가 몰림 → 정보의 비대칭성 (결국 , facebook /amazon 과 같은 대기업만 남고 나머지는 다 몰수될 수도..)
- 사회 구조 또한 이렇게 이루어짐.

— P2P Network

- 공평함
- 중앙 DB가 없음.
- But, 누가 이 기록을 관리하냐?, 원장을 누가 관리하냐? → 이를 블록체인이 해결할 것.

### 블록체인의 지속 가능성 ( 역사적, 경제적 관점 )

- 이제는 탈중앙화 시대로 넘어가고 있다!
- ICO : Initial Coin Offering ( 내가 만든 코인을 사세요~ ) / IPO : Initial Public Offering
- 블록체인 : Privacy 문제를 해결하며 Deep Learning 을 발전시킬 수 있을 것.

### 블록체인 개념

- 모든 거래 기록이 중앙 중개자 없이, 숨김 없이, 오류없이 모두에게 확인된다.
- 거래가 담긴 블록이 사슬 모양으로 늘어선 것. (블록이 체인처럼 연결, 원장 기록을 확실히 하기 위해 원장 확인)
- 금융 ) transaction 즉, 거래, 자산의 이동을 확실하게 해준다. 세계 어디에 있던 간에 전송 가능.

### 게임으로 합의에 도달

- 끝말 이어가기 게임, 빙고 게임과 흡사
- 목적은 합의, 목표는 보상(비트코인으로)
- 참가자 : 전세계 모든 마이너들(채굴자들 - 약 10000개 정도의 노드)
- 블록 해쉬값이 일정값 이하 되는 nonce 값 찾기
- 찾으면(끝말을) 바로 블록(빙고)을 피투피 네트웍을 통해 전세계로 보낸다.
- 일정 시간이 지나면 모든 참여자들이 똑같은 상태에 이른다. (블록체인)

### 비트코인 개념

- 내 지갑(통장)의 코인 잔고 : "기록"이 남아있는 것. → 실제 코인이 들어 있는 것이 아닌 잔고만 보여줌.
- 내 주소로 받은 모든 코인량이 독립적으로 존재. ** 실제 돈이 있는 것이 아닌 기록 3개가 존재한다.
- 과거 거래로부터 새로운 거래 : 이전 거래 기록을 참조하여 송금한다.
  - 마이너들은 수수료가 높은 것부터 마이닝한다.
  - 지갑 주인을 알 수 없다.
  - 어느 지갑에서 어느 지갑으로 날렸는지를 기록한다.
  - In/Out이 맞지 않으면 마이너들이 보고 cut 해버림
  - 어디서부터 왔는지 이 거래의 원천을 확인 가능하다. 돈이 어디서부터 왔는지 추적 가능 ⇒ "신뢰" ***

### 공개키(비대칭키) 암호

— 관용 암호 (대칭키)

- 암호, 복호에 동일한 키와 동일한 알고리즘 사용
- 수신자와 송신자는 키를 교환해야 함.
- 공유한 키(비밀키)는 비밀로 유지
- 키 분배 어려움
- 디지털 서명 어려움
- 속도가 빠름

— 공개키 암호 (비대칭키)

- 암호, 복호에 각각 서로 다른 키와 동일한 알고리즘 사용
- 수신자와 송신자는 연관된 키 쌍 중 하나를 알아야 함.
- 키 쌍 중 하나(개인키)를 비밀로 유지
- 공개키를 공개
- ** 중요 ** 디지털 서명 가능
- 속도가 느림

### 전자서명

- 현실 세계에서 상거래시, 계약시 인감을 찍으면 법적 효력이 있음
- 전자 서명은 인터넷 상에서 인감의 역할을 하며 역시 법적인 효력을 지님.



## 블록체인 용어 정리

### 합의 알고리즘

- 생성된 블록의 유효성을 검토하여 블록체인에 반영 여부를 의사결정하는 방식을 의미.
- 대표적으로 작업 증명, 지분 증명, 위임 증명 방식 등이 있음.
- 기존의 중앙 system은 합의 알고리즘이 필요 없다. 하지만 , 여기선 필요.
- 참가하는 사람들 중 누가 결정할지 몲. 해시 함수로 결정, 일종의 투표와 같음. 다수결 투표를 이용해 결정.

### 작업 증명

- 컴퓨터 연산 작업을 수행하여 블록체인에 기여하는 대가로 보상을 받는 방식이다. 연산을 위해서는 성능이 우수한 장비를 필요로 한다. P2P 네트워크에서 시간과 비용을 들여 수행된 컴퓨터 연산 작업을 신뢰하기 위해 참여 당사자 간에 간단히 검증하는 방식이다.
- hash 함수를 돌려 특정 조건 맞추면 전체 트랜잭션 합의 → 확정 !

### 지분증명

- 노드에 기여하는 대가로 보상을 받는 방식. 채굴 파워가 아닌 지분에 따른 정당한 의사결정이 이루어지며 채굴 파워에 의한 중앙화를 방지하며 에너지 낭비를 최소화한 친환경적인 방식이다. 지분에 비례한 공정한 보상 지급을 통해 작업 증명 방식의 단점을 보완.
- 작업 증명의 문제점 : 하드웨어 너무 많이 듦 (전기 많이..) 이를 해결 → deposit 하고 사기 치면 몰수하는 방식

### 위임증명

- 자격을 갖춘 선택된 증인이 참여자들이 보유하고 있는 지분을 위임받아 블록을 검증하는 방식. 이중 채굴과 그라인딩 어택에 대해 내성을 갖는 합의 프로토콜이라 평가받음. 모든 참여자가 블록을 검증하는 것이 아닌 소수의 증인만이 블록을 검증하기 떄문에 증명 속도가 빠르다는 장점이 있다.
- 미국의 선거인단 투표와 비슷